<% if posts.any? %>
  <table class='table col-md-12'>
    <thead>
      <th scope='col' class='col-md-3'>アイテム名</th>
      <th scope='col' class='col-md-2'>タグ</th>
      <th scope='col' class='col-md-2'>興味を持った日</th>
      <th scope='col' class='col-md-2'>ステータス</th>
      <th scope='col' class='col-md-2'></th>
    </thead>
    <tbody>
      <% posts.uniq.each do |post| %>
        <tr>
          <th><%= link_to post.item.item_name, post.item %></th>
          <td>
            <% post.item.tags.uniq.each do |tag| %>
              <%= link_to tag.tag_name, myitems_user_path(searched: { tag_name: tag.tag_name }), class: 'btn-sm btn-info tag' %>
            <% end %>
          </td>
          <td>
            <%= l post.created_at, format: :date %>
          </td>
          <td>
            <% if post.completed? %>
              <div><%= "#{l(post.completed_at, format: :date)}に完了" %></div>
              <% if current_user.own?(post) %>
                <div><%= link_to '未完了に戻す', post_uncomplete_path(post), method: :post, class: 'btn btn-sm btn-warning mt-2' %></div>
              <% end %>
            <% else %>
              <div>未完了</div>
              <% if current_user.own?(post) %>
                <div><%= link_to '完了する', post_complete_path(post), method: :post, class: 'btn btn-sm btn-primary mt-2' %></div>
              <% end %>
            <% end %>
          </td>
          <td>
            <%= link_to '投稿の詳細', post_path(post), class: 'btn-sm btn-info info-link' %>
            <%= link_to 'アイテムの詳細', item_path(post.item), class: 'btn-sm btn-info info-link' %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <span>アイテムはまだありません</span>
<% end %>
<%= paginate posts %>